# Cursor Rules for cursor-analytics

## Repository Overview
This is a Databricks toolkit with MCP servers for Cursor AI integration.

## MCP Servers (Primary Interface)
All MCP servers are in `mcp/`:
- `mcp/databricks/server.py` - SQL, notebooks, workspace sync
- `mcp/google_sheets/server.py` - Read spreadsheets
- `mcp/atlassian/` - Jira, Confluence (external)
- `mcp/atlan/` - Data catalog (external)
- `mcp/github/` - GitHub operations (external)

## File Organization

| Type | Location |
|------|----------|
| MCP servers | `mcp/` |
| Core functions | `core/` |
| Use case scripts | `use_cases/` |
| CLI scripts | `scripts/` |
| Tests | `tests/` |
| Historical | `archive/` |

### Key Files
- `mcp/databricks/server.py` - Main MCP server
- `core/__init__.py` - Core package exports
- `config.py` - Credentials (gitignored)

## Coding Patterns

### Running SQL (via MCP)
Use the `execute_sql` tool - it's the primary interface.

### Running SQL (via Python)
```python
from databricks_api import DatabricksAPI
db = DatabricksAPI()
db.run_sql("SELECT * FROM table")
```

## Testing

After any change:
```bash
python scripts/smoke_test.py --quick
```

## Do NOT

- Delete files in `core/` without checking dependencies
- Modify `mcp/databricks/server.py` without testing
- Commit `config.py` (contains credentials)
- Create files at root level (use appropriate subdirectory)
